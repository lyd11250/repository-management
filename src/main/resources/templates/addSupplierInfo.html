<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加供应商</title>
    <link rel="stylesheet" href="css/main.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.SuperSlide.js"></script>

</head>
<body>
<div id="search_bar" class="mt10">
    <div class="box">
        <div class="box_border">
            <div class="box_top"><b class="pl15">添加供应商</b></div>
            <div class="box_center pt10 pb10">
                <table class="form_table" border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td>公司名称</td>
                        <td><input type="text" name="spName" id="spName" class="input-text lh25" size="10"></td>
                        <td>联系人</td>
                        <td><input type="text" name="spCon" id="spCon" class="input-text lh25" size="10"></td>
                        <td>公司地址</td>
                        <td><input type="text" name="spAdd" class="input-text lh25" size="10"></td>
                        <td>联系电话</td>
                        <td><input type="text" name="spPhone" class="input-text lh25" size="10"></td>
                        <td>供应商品</td>
                        <td><input type="text" name="spGoods" class="input-text lh25" size="25"></td>
                    </tr>
                </table>
            </div>
            <div class="box_bottom pb5 pt5 pr10" style="border-top:1px solid #dadada;">
                <div class="search_bar_btn" style="text-align:right;">
                    <input type="button" value="返回" onclick="location.href='javascript:history.go(-1)'" class="ext_btn">
                    <input type="button" id="btn-add1" value="保存" onclick="location.href='javascript:history.go(-1)'" class="ext_btn">
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var saveOrUpdate = -1;
    $("#btn-add1").click(function save(){
        console.log("test");
        //发送的数据
        // var rmName1 = jQuery("#rmName").val();
        var spName =  $("input[name='spName']").val();
        var spCon = $("input[name='spCon']").val();
        var spAdd =  $("input[name='spAdd']").val();
        var spPhone =  $("input[name='spPhone']").val();
        var spGoods =  $("input[name='spGoods']").val();
        var sendData =  "spName="+spName+"&spCon="+spCon+"&spAdd="+spAdd+"&spPhone="+spPhone+"&spGoods="
            +spGoods;
        if (saveOrUpdate == -1){
            $.ajax({
                url:"supplier/new",
                data:sendData,
                type:"POST",
                success:function(data){
                    if (data){
                        alert("添加成功")
                        $(".table-responsive").empty();
                        getAllSupplier();
                    }else{
                        alert("添加失败")
                    }
                }
            })
        }else if (saveOrUpdate == 1){//修改操作
            $.ajax({
                url:"supplier/edit",
                data:sendData,
                type:"POST",
                success:function(data){
                    if (data){
                        alert("修改成功")
                        $(".table-responsive").empty();
                        getAllSupplier();
                    }else{
                        alert("修改失败")
                    }
                }
            })
            saveOrUpdate == -1;//改回操作标志，避免一直发送修改请求
        }})
</script>
</body>
</html>